name: "Oneplus 3/3T"
codename: "oneplus3"
formfactor: "phone"
aliases:
  - "msm8996"
  - "OnePlus3"
  - "OnePlus3T"
doppelgangers: []
user_actions:
  recovery:
    title: "Reboot to Recovery"
    description: "With the device powered off, hold Volume Down + Power. You might have to unplug your device. Plug it back in as soon as it is in recovery mode and click the button below to continue."
    image: "phone_power_down"
    button: true
  bootloader:
    title: "Reboot to Bootloader"
    description: "With the device powered off, hold Volume Up + Power. You might have to unplug your device. Plug it back in as soon as it is in bootloader/fastboot mode and click the button below to continue."
    image: "phone_power_up"
    button: true
  twrp:
    title: "TWRP"
    description: "The installation instructions for this device are not fully tested yet. In some cases, when coming from Android, you will have to install TWRP and format /data and /system from inside TWRP before you can install Ubuntu Touch."
    link: "https://twrp.me/oneplus/oneplusthree.html"
unlock:
  - "twrp"
handlers:
  bootloader_locked:
    actions:
      - fastboot:oem_unlock:
operating_systems:
  - name: "Ubuntu Touch"
    options:
      - var: "channel"
        name: "Channel"
        tooltip: "The release channel"
        link: "https://docs.ubports.com/en/latest/about/process/release-schedule.html"
        type: "select"
        remote_values:
          systemimage:channels:
      - var: "wipe"
        name: "Wipe Userdata"
        tooltip: "Wipe personal data"
        type: "checkbox"
    prerequisites: []
    steps:
      - actions:
          - core:download:
              group: "firmware"
              files:
                - url: "http://cdimage.ubports.com/devices/halium-unlocked-recovery_oneplus3.img"
                  checksum:
                    sum: "ca6359915a692523d7d12f6f0ca85e81d89328e7ad5bd46779e0af5c4b8c850b"
                    algorithm: "sha256"
      - actions:
          - adb:reboot:
              to_state: "bootloader"
        fallback:
          - core:user_action:
              action: "bootloader"
      - actions:
          - fastboot:flash:
              partitions:
                - partition: "recovery"
                  file: "halium-unlocked-recovery_oneplus3.img"
                  group: "firmware"
      - actions:
          - fastboot:erase:
              partition: "cache"
      - actions:
          - fastboot:boot:
              group: "firmware"
              file: "halium-unlocked-recovery_oneplus3.img"
        fallback:
          - core:user_action:
              action: "recovery"
      - actions:
          - systemimage:install:
      - actions:
          - adb:reboot:
              to_state: "recovery"
        fallback:
          - core:user_action:
              action: "recovery"
    slideshow: []
